migration:
  options:
    install_args: --load=web,web_kanban,session_redis,attachment_s3,logging_json
  versions:
    - version: 9.2.0
      addons:
        upgrade:
          - base_technical_features
          - l10n_ch
          - specific_membership
          - specific_project
          - specific_project_proposal
          - theme_fluxdocs
          - website_fluxdock_signup
          - website_portal_profile
          - website_portal_project
          # env conf
          - mail_environment
          # camptocamp/cloud-platform
          - cloud_platform
          - attachment_s3
      operations:
        pre:
          - anthem songs.install.pre::main
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
          - anthem songs.install.post::main
      modes:
        demo:
          operations:
            post:
              - anthem songs.demo.data_demo::main
    - version: 9.2.1
      # here we start with cloud platform.
      # This step is needed to update current prod DB.
      addons:
        upgrade:
          # camptocamp/cloud-platform
          - cloud_platform
          - attachment_s3
      operations:
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
    - version: 9.2.2b1
      addons:
        upgrade:
          - mail_environment
          - base_technical_features
        #   updated OCB version
          - base
      operations:
        post:
          - anthem songs.install.post::enable_html_compression
          # this is needed after updating ALL modules
          - anthem songs.install.post::remove_useless_menuitems
    - version: 9.2.2b2
    #   addons:
    #     upgrade:
    #       - foo
      operations:
        post:
          - anthem songs.install.project::main
