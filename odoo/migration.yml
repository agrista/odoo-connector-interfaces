migration:
  options:
    install_command: odoo.py
  versions:
    - version: 9.0.1
      operations:
        pre:
          - "sh -c 'PGPASSWORD=$DB_PASSWORD psql -h db -U $DB_USER -c \"CREATE EXTENSION IF NOT EXISTS pg_trgm;\" $DB_NAME'"
      addons:
        upgrade:
          - base_technical_features
          - l10n_ch
          - specific_membership
          - specific_project_proposal
          - theme_fluxdocs
          - website_fluxdock_signup
          - website_portal_profile
          - website_portal_project
    - version: 9.0.2
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.3
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.4
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.5
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.6
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.7
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.8
      # nothing to do, all has been installed in 9.0.1
    - version: 9.0.9
      operations:
        pre:
          - anthem songs.install.pre::main
        post:
          - anthem songs.install.post::main
      addons:
        upgrade:
          - specific_server_environment_files
    - version: 9.0.10
      addons:
        upgrade:
          - specific_membership
          - specific_project_proposal
          - theme_fluxdocs
          - specific_project
      operations:
        post:
          - anthem songs.install.post::add_membership_upgrade_email
    - version: 9.1.0a1
      addons:
        upgrade:
          - specific_membership
    - version: 9.1.0a2
      addons:
        upgrade:
          - specific_membership
    - version: 9.1.0a3
      addons:
        upgrade:
          - specific_membership
          - specific_project_proposal
          - theme_fluxdocs
          - specific_project
    - version: 9.1.0a4
      addons:
        upgrade:
          - specific_membership
          - specific_project_proposal
          - theme_fluxdocs
          - specific_project
    - version: 9.1.0a5
      addons:
        upgrade:
          - specific_membership
          - theme_fluxdocs
    - version: 9.1.0a6
      addons:
        upgrade:
          # we upgraded odoo OCB and server-tools versions
          # to today latest commits @2016-12-13 16:30
          - base
      operations:
        post:
          - anthem songs.install.post::remove_useless_menuitems
    - version: 9.1.0a7
      addons:
        upgrade:
          - theme_fluxdocs
          - specific_membership

    - version: 9.1.0a8
      addons:
        upgrade:
          - theme_fluxdocs
          - specific_membership
          - specific_project
