migration:
  options:
    install_args: --load=web,web_kanban,session_redis,attachment_s3,logging_json
  versions:
    - version: 9.2.0
      addons:
        upgrade:
          - base_technical_features
          - l10n_ch
          - specific_membership
          - specific_project
          - specific_project_proposal
          - theme_fluxdocs
          # env conf
          - mail_environment
          # camptocamp/cloud-platform
          - cloud_platform
          - attachment_s3
      operations:
        pre:
          - anthem songs.install.pre::main
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
          - anthem songs.install.post::main
      modes:
        demo:
          operations:
            post:
              - anthem songs.demo.data_demo::main
    - version: 9.2.1
      # here we start with cloud platform.
      # This step is needed to update current prod DB.
      addons:
        upgrade:
          # camptocamp/cloud-platform
          - cloud_platform
          - attachment_s3
      operations:
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
    - version: 9.2.2
      addons:
        upgrade:
          - base_technical_features
          - document
          - mail_environment
        #   updated OCB version
          - base
      operations:
        post:
          - anthem songs.install.post::enable_html_compression
          # this is needed after updating ALL modules
          - anthem songs.install.post::remove_useless_menuitems
    - version: 9.2.3
      addons:
        upgrade:
          - attachment_s3
          - cms_status_message
          - cms_form
    - version: 9.2.4b1
      addons:
        upgrade:
          # updated translations
          - specific_membership
          - specific_project
          - specific_project_proposal
          - theme_fluxdocs
    - version: 9.2.4b2
      addons:
        upgrade:
          - specific_membership
          - specific_project
          - specific_project_proposal
          - theme_fluxdocs
      operations:
        post:
          - anthem songs.upgrades.upgrade_9_2_4::main
    - version: 9.2.4b3
      addons:
        upgrade:
          - theme_fluxdocs
    - version: 9.2.4b4
    - version: 9.2.4b5
      addons:
        upgrade:
          - specific_membership
          - theme_fluxdocs
          - cms_delete_content
      operations:
        post:
          - anthem songs.upgrades.upgrade_9_2_4::main
    - version: 9.3.0b1
      addons:
        upgrade:
          - specific_membership
          - specific_project_proposal
          - theme_fluxdocs
      operations:
        post:
          - anthem songs.upgrades.upgrade_9_3_0::main
