<?xml version="1.0" encoding="UTF-8"?>
<odoo>

<record model="ir.ui.view" id="view_project_proposal_form">
  <field name="name">project.proposal.form</field>
  <field name="model">project.proposal</field>
  <field name="arch" type="xml">
    <form string="Proposals">
      <sheet>
        <div class="oe_button_box" name="button_box">
            <field name="website_url" invisible="1"/>
            <button class="oe_stat_button" name="website_publish_button"
                type="object" icon="fa-globe">
                <field name="website_published" widget="website_button"/>
            </button>
        </div>
        <div class="oe_title">
          <div class="oe_edit_only">
              <label for="name"/>
          </div>
          <h1>
              <field name="name" placeholder="e.g. My great project"/>
          </h1>
          <label for="create_uid" string="Owner" class="oe_edit_only"/>
          <h2>
            <field name="create_uid"/>
          </h2>
        </div>
        <notebook>
          <page string="Project Details">
            <group>
              <group>
                <field name="start_date" string="Starting on"/>
                <field name="stop_date" string="Ending on"/>

                <label for="duration"/>
                <div>
                    <field name="duration" class="oe_inline"/>
                    <span> days</span>
                </div>
                <group>
                  <field name="industry_ids" widget="many2many_tags" />
                  <field name="expertise_ids" widget="many2many_tags" />
                  <field name="location" />
                  <field name="country_id" />
                </group>

              </group>
            </group>
            <label for="website_short_description"/>
            <field name="website_short_description"/>
            <label for="website_description"/>
            <field name="website_description"/>
          </page>
        </notebook>
      </sheet>
      <div class="oe_chatter">
        <field name="message_follower_ids" widget="mail_followers"/>
        <field name="message_ids" widget="mail_thread" />
      </div>
    </form>
  </field>
</record>

<!-- Project Proposal Tree View  -->

<record model="ir.ui.view" id="view_project_proposal_tree">
  <field name="name">Proposals - Tree</field>
  <field name="model">project.proposal</field>
  <field name="arch" type="xml">
    <tree string="Proposals" decoration-bf="message_needaction==True">
      <field name="name" string="Project name"/>
      <field name="start_date" string="Start Date"/>
      <field name="stop_date" string="End Date"/>
      <field name="create_uid"/>
      <field name="location"/>
      <field name="country_id"/>
      <field name="duration"/>
      <field name="message_needaction" invisible="1"/>
    </tree>
  </field>
</record>

<!-- Project Proposal Calendar -->
<record model="ir.ui.view" id="view_project_proposal_calendar">
  <field name="name">Proposal</field>
  <field name="model">project.proposal</field>
  <field name="arch" type="xml">
    <calendar string="Proposals" date_start="start_date" date_stop="stop_date" date_delay="duration"
      display="[name]" color="color_owner_id" mode="month">
      <field name="name"/>
      <field name="create_uid"/>
      <field name="color_owner_id"/>
    </calendar>
  </field>
</record>

<!-- Project Proposal Search View  -->
<record id="view_project_proposal_search" model="ir.ui.view">
  <field name="name">Proposal Search</field>
  <field name="model">project.proposal</field>
  <field name="arch" type="xml">
    <search string="Search Proposals">
      <field name="name" string="Proposal" filter_domain="[('name','ilike',self)]"/>
      <field name="industry_ids"/>
      <field name="expertise_ids"/>
      <field name="country_id"/>
      <field name="create_uid"/>
      <filter string="Unread Messages" name="message_needaction" domain="[('message_needaction','=',True)]"/>
      <separator/>
      <group expand="0" string="Group By">
        <filter string="Owner" domain="[]" context="{'group_by':'create_uid'}"/>
        <filter string="Country" domain="[]" context="{'group_by':'country_id'}"/>
      </group>
    </search>
  </field>
</record>

<record id="action_project_proposal" model="ir.actions.act_window">
  <field name="name">Proposals</field>
  <field name="res_model">project.proposal</field>
  <field name="view_mode">tree,form,calendar</field>
  <field name="view_id" ref="view_project_proposal_tree"/>
  <field name="search_view_id" ref="view_project_proposal_search"/>
  <field name="help" type="html">
    <p class="oe_view_nocontent_create">
      Click to add a proposal.
      </p><p>
      The proposal will shared with parners depending on industries and expertises.
    </p>
  </field>
</record>

</odoo>
