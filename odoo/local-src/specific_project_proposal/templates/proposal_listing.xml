<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="proposal_index" name="Proposals">
  <t t-call="website.layout">
    <div id="wrap">
      <div class="oe_structure">
        <section class="content opt_dark_bg">
          <div class="content-wrap">
            <div class="center-block mb16">
                <div class="content-icon">
                    <img src="/specific_project_proposal/static/src/img/market.png"></img>
                </div>
                <h2>
                  <t t-if="my">
                    My Project proposals
                  </t>
                  <t t-if="not my">
                    Market
                  </t>
                </h2>
            </div>
            <form class="search-panel" role="search" t-attf-action="#{url}" method="get">
                <div class="row filter-row row-1">
                    <div class="col-md-12">
                        <input type="text" name="search_name" class="search-query form-control"
                            placeholder="Search project..." t-att-value="search_name" />
                        <button type="submit" class="btn btn-default btn-primary ">Search</button>
                    </div>
                </div>
                <div class="row filter-row row-2">
                    <div class="col-md-6">
                        <input name="search_industries"
                               class="search-query form-control oe_search_box js_select2_categories"
                               placeholder="Industries" t-attf-data-init-value="#{industries}" value="Industry"/>
                    </div>
                    <div class="col-md-6">
                        <input name="search_expertises"
                               class="search-query form-control oe_search_box js_select2_expertises"
                               placeholder="Expertises" t-attf-data-init-value="#{expertises}" value="Expertise"/>
                    </div>
                </div>
                <div class="row filter-row row-3">
                    <div class="col-md-6">
                        <div class="styled-select">
                          <select name="search_country" class="form-control">
                            <option value="">Country...</option>
                            <t t-foreach="countries or []" t-as="country">
                              <option t-att-value="country.id"
                                t-att-selected="country.id == selected_country_id">
                                <t t-esc="country.name" />
                              </option>
                            </t>
                          </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <input type="text" name="search_location"
                               class="search-query form-control oe_search_box"
                               placeholder="Location" t-att-value="search_location" />
                    </div>
                </div>
            </form>
          </div>
        </section>
      </div>

      <div class="container oe_website_proposals">
        <div class="row">
          <div class="hidden" id="proposals_grid_left">

          </div>
          <div class="center-block main-content-wrapper" id="proposals_grid">
            <div t-if="not proposals">
              <div class="text-center text-muted">
                <h4 class="css_editable_display">No project proposal found</h4>
                <t t-if="not my">
                  <h4 class="css_editable_hidden">There isn't project proposal published now, click <a t-attf-href="/page/website.contactus">here</a> to contact us</h4>
                </t>
                <t t-if="my">
                  <h4 class="css_editable_hidden">Go in <a href="/my">your account</a> to create your proposals.</h4>
                </t>
              </div>
            </div>
            <ul class="media-list" t-if="proposals">
              <li t-foreach="proposals" t-as="proposal" class="media">
                <div class="media-body proposal_item" t-att-data-publish="proposal.website_published and 'on' or 'off'">
                  <div class="text-muted">
                    <span t-field="proposal.create_date" t-field-options='{"format": "d MMMM y"}'/>
                  </div>
                  <h3 class="media-heading">
                    <a t-att-href="detail_url.format(slug(proposal))">
                      <span t-field="proposal.name"/>
                    </a>
                  </h3>
                  <t t-if="proposal.owner_id.id != uid">
                    <a class="hide_proposal fa fa-eye-slash no-decoration pull-right"
                      t-attf-data-href="/proposals/proposal/#{ slug(proposal)}/hide"
                      title="Don't show again this project proposal"/>
                  </t>
                  <span t-if="not proposal.website_published" class="label label-danger">not published</span>
                  <p t-field="proposal.website_short_description"/>
                  <div>
                    <b>Industries:</b>
                    <t t-foreach="proposal.industry_ids" t-as="industry">
                      <span t-attf-class="label #{industry_ids and industry.id in industry_ids and 'label-primary' or 'label-default'}" t-field="industry.display_name"
                        style="margin-right: 4px;"/>
                    </t>
                    <a t-att-href="detail_url.format(slug(proposal))">
                      Read More <i class="fa fa-arrow-right"/>
                    </a>
                  </div>
                </div>
              </li>

            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center mb32">
      <t t-call="website.pager"/>
    </div>
  </t>
</template>

</odoo>
