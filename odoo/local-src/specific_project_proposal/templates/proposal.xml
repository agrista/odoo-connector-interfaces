<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <template id="proposal_detail" name="Proposal Detail">
    <t t-call="website.layout">
      <t t-set="is_anon" t-value="not request.session.uid"/>
      <!-- important to check for `is_anon` too because when you are anonymous user
  you are "Public User" indeed, so you could have a membership state (default to `free`)-->
      <t t-set="is_associate" t-value="not is_anon and request.env.user.is_associate"/>
      <t t-set="is_free_member" t-value="not is_anon and request.env.user.is_free"/>

      <div class="opt_dark_bg proposal-detail" id="wrap">
        <t t-call="theme_fluxdocs.mgmt_actions">
            <t t-set="object" t-value="proposal"/>
        </t>
        <div class="white_bg pt2">
          <div class="center-block main-content-wrapper" id="ref_content">
            <h1><t t-esc="proposal.name"/></h1>
            <div class="text-muted">
                <span t-field="proposal.create_date" t-field-options='{"widget": "date"}'/>
            </div>
            <p><b t-field="proposal.website_short_description"/></p>
            <!-- <div class="info border-tnb mb32 mt16 pt1 pb1">
              <address>
                  <t t-set="partner" t-value="proposal.sudo().create_uid.partner_id"/>
                  <t t-set="partner" t-value="partner.parent_id if partner.parent_id else partner"/>
                  <t t-if="is_associate">
                      <b t-field="partner.name"/>
                      <div t-field="partner.self" t-field-options='{
                                                                      "widget": "contact",
                                                                      "fields": ["address", "phone", "fax", "email"]
                                                                    }'/>
                  </t>
              </address>
            </div> -->
            <div class="details border-tnb mb32 mt16 pt1 pb1">
              <t t-if="is_associate">
                  <p t-field="proposal.website_description"/>
              </t>

              <div t-if="is_associate">
                  <b>Country:</b>
                  <span t-field="proposal.country_id"/>
              </div>
              <div t-if="is_associate">
                  <b>Location:</b>
                  <span t-field="proposal.location"/>
              </div>

              <div>
                  <b>Duration:</b>
                  <span t-field="proposal.start_date"/>
                  -
                  <span t-field="proposal.stop_date"/>
              </div>
              <div>
                  <b>Industries:</b>
                  <t t-foreach="proposal.industry_ids" t-as="industry">
                      <span t-field="industry.display_name"/>
                  </t>
              </div>
              <div t-if="is_associate">
                  <b>Expertises:</b>
                  <t t-foreach="proposal.expertise_ids" t-as="expertise">
                      <span t-field="expertise.name"/>
                  </t>
              </div>
            </div>
          </div>
          <div class="membership-actions opt_dark_bg">
            <div class="center-block main-content-wrapper">
              <t t-if="is_anon">
                <div class="is_anon">
                  <!-- anonymous -->
                  <h2>Membership</h2>
                  <a class="btn btn-primary" t-att-href="'/web/presignup?redirect=' + detail_url">
                      Sign Up
                  </a>
                  <a class="btn btn-primary" t-att-href="'/web/login?redirect=' + detail_url">
                      Login
                  </a>
                </div>
              </t>
              <t t-if="is_free_member">
                <div class="is_free_member">
                  <h2>Membership</h2>
                  <a class="btn btn-primary" t-att-href="'/my/membership?redirect=' + detail_url">
                      Become an associate member
                  </a>
                </div>
              </t>
            </div>

          </div>
          <div class="white_bg pt2 backto_actions">
            <div class="center-block main-content-wrapper text-center">
              <a class="btn btn-dark" t-attf-href="#{return_link}">
                <t t-if="filters == 'match'">Return to my account</t>
                <t t-if="filters != 'match'">Return to list</t>
              </a>
            </div>
          </div>
        </div>
      </div>
    </t>
  </template>


</odoo>
