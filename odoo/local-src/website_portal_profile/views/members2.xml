<?xml version="1.0" encoding="utf-8"?>
<odoo>

      <!-- hide "your details" in account view -->
    <!-- <template id="fluxdock_hide_your_details" name="Fluxdock hide your details" inherit_id="website_portal.account"> -->
    <!--     <xpath expr="//div[contains(@id,'o_my_sidebar')]" position="replace"> -->
    <!--         <div id="o_my_sidebar" class="hide o_my_sidebar"> -->
    <!--             <div class="o_my_details"> -->
    <!--                 <h3 class="page&#45;header">Your Details <a href="/my/account" class="btn btn&#45;default btn&#45;xs">Change</a></h3> -->
    <!--                 <div t&#45;field="user.partner_id" t&#45;field&#45;options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/> -->
    <!--             </div> -->
    <!--         </div> -->
    <!--     </xpath> -->
    <!-- </template> -->

    <!-- hide quotations -->
    <template id="website_portal_sale.quotations" name="Quotations">
        <div class="hide">
            <h3 class="page-header">Your Quotes</h3>
            <t t-if="not quotations">
                <p>There are currently no quotes for your account.</p>
            </t>
            <t t-if="quotations">
                <table class="table table-hover o_my_status_table">
                    <thead>
                    <tr class="active">
                        <th>Quotation #</th>
                        <th>Valid Until</th>
                        <th></th>
                        <th>Total</th>
                        </tr>
                    </thead>
                    <t t-foreach="quotations" t-as="quotation">
                        <tr t-att-class="'hidden to_hide' if quotation.state!='sent' and quotation_index &gt; 4 else ''">
                            <td>
                                <a t-att-href="'/my/orders/'+str(quotation.id)"><t t-esc="quotation.name"/></a>
                            </td>
                            <td><span t-field="quotation.validity_date"/></td>
                            <td>
                            <t t-if="quotation.state == 'cancel'">
                                <span class="label label-default"><i class="fa fa-fw fa-remove"/> Cancelled</span>
                            </t>
                            <t t-if="quotation.validity_date and quotation.validity_date &lt; date">
                                <span class="label label-default"><i class="fa fa-fw fa-clock-o"/> Expired</span>
                            </t>
                            </td>
                            <td><span t-field="quotation.amount_total" t-field-options='{"widget": "monetary", "display_currency": "quotation.pricelist_id.currency_id"}'/>
                            </td>
                        </tr>
                    </t>
                    <tr t-att-class="'hidden' if len(quotations) &lt; 5 else ''">
                    <td colspan="5"><a href="" class="o_my_show_more btn btn-xs btn-default"><span>Show more</span><span class="hidden">Show less</span></a></td>
                    </tr>
                </table>
            </t>
        </div>
    </template>

    <!-- hide sales -->
    <template id="website_portal_sale.sale_orders" name="Sales Orders">
        <div class="hide">
            <h3 class="page-header">Your Orders</h3>
            <t t-if="not orders">
                <p>There are currently no orders for your account.</p>
            </t>
            <t t-if="orders">
                <table class="table table-hover o_my_status_table">
                    <thead>
                    <tr class="active">
                        <th>Sale Order #</th>
                        <th>Order Date</th>
                        <th></th>
                        <th>Total</th>
                    </tr>
                    </thead>
                    <t t-foreach="orders" t-as="order">
                        <tr t-att-class="'hidden to_hide' if order.state not in ['manual', 'progress'] and order_index &gt; 4 else ''">
                            <td>
                                <a t-att-href="'/my/orders/'+str(order.id)"><t t-esc="order.name"/></a>
                            </td>
                            <td><span t-field="order.date_order"/></td>
                            <td>
                                <t t-if="order.state == 'progress'">
                                    <span class="label label-info"><i class="fa fa-fw fa-clock-o"/> Invoiced</span>
                                </t>
                                <t t-if="order.state in ['shipping_except','invoice_except']">
                                    <span class="label label-danger"><i class="fa fa-fw fa-warning"/> Problem</span>
                                </t>
                                <t t-if="order.state == 'done'">
                                    <span class="label label-default"><i class="fa fa-fw fa-check"/> Done</span>
                                </t>
                            </td>
                            <td><span t-field="order.amount_total" t-field-options='{"widget": "monetary", "display_currency": "order.pricelist_id.currency_id"}'/></td>
                        </tr>
                    </t>
                    <tr t-att-class="'hidden' if len(orders) &lt; 5 else ''">
                    <td colspan="4"><a href="" class="o_my_show_more btn btn-xs btn-default"><span>Show more</span><span class="hidden">Show less</span></a></td>
                    </tr>
                </table>
            </t>
        </div>
    </template>

    <!-- hide invoices -->
    <template id="website_portal_sale.invoices" name="Invoices and Payments">
        <div class="hide">
            <h3 class="page-header">Your Invoices and Payments</h3>
            <t t-if="not invoices">
                <p>There are currently no invoices for your account.</p>
            </t>
            <t t-if="invoices">
                <table class="table table-hover o_my_status_table">
                    <thead>
                    <tr class="active">
                        <th>Invoice #</th>
                        <th>Invoice Date</th>
                        <th>Due Date</th>
                        <th></th>
                        <th></th>
                        <th>Amount Due</th>
                    </tr>
                    </thead>
                    <t t-foreach="invoices" t-as="invoice">
                        <tr t-att-class="'hidden to_hide' if invoice.state!='open' and invoice_index &gt; 4 else ''">
                            <td class= "cell_overflow">
                                <a t-att-href="'/report/pdf/account.report_invoice/'+str(invoice.id)" t-att-title="invoice.number"><t t-esc="invoice.number"/></a>
                            </td>
                            <td><span t-field="invoice.date_invoice"/></td>
                            <td><span t-field="invoice.date_due"/></td>
                            <td>
                                <t t-if="invoice.state == 'open'">
                                    <span class="label label-info"><i class="fa fa-fw fa-clock-o"/> Waiting for Payment</span>
                                </t>
                                <t t-if="invoice.state == 'paid'">
                                    <span class="label label-default"><i class="fa fa-fw fa-check"/> Paid</span>
                                </t>
                                <t t-if="invoice.state == 'cancel'">
                                    <span class="label label-default"><i class="fa fa-fw fa-remove"/> Cancelled</span>
                                </t>
                            </td>
                            <td>
                            <a t-if="invoice.state == 'open'" t-attf-href="/website_payment/pay?reference=#{invoice.number}&amp;amount=#{invoice.residual}&amp;currency_id=#{invoice.currency_id.id}&amp;country_id=#{invoice.partner_id.country_id.id}" alt="Pay Now" class="btn btn-xs btn-primary"><i class="fa fa-arrow-circle-right"/> Pay Now</a>
                            </td>
                            <td><span t-field="invoice.residual" t-field-options='{"widget": "monetary", "display_currency": "invoice.currency_id"}'/></td>
                        </tr>
                    </t>
                    <tr t-att-class="'hidden' if len(invoices) &lt; 5 else ''">
                    <td colspan="5"><a href="" class="o_my_show_more btn btn-xs btn-default"><span>Show more</span><span class="hidden">Show less</span></a></td>
                    </tr>
                </table>
            </t>
        </div>
    </template>

    <!-- load member profile table -->
    <template id="account" name="Account" inherit_id="website_portal.account">
        <xpath expr="//div[contains(@class,'o_my_documents')]" position="inside">
            <t t-call="website_portal_profile.partner_table" />
        </xpath>
    </template>

    <!-- Partner profile table -->
    <template id="website_portal_profile.partner_table" name="Partner table">
        <div id="partner_table" class="col-md-12">
            <h3 class="page-header">Member profil</h3>
            <t t-if="partner">
                <div class="table-responsive">
                    <table class="table table-condensed picture-table">
                        <tr>
                            <td>
                                <div class="media">
                                    <img itemtype="image" class="img img-responsive" t-att-src="website.image_url(partner, 'image', None if product_image_big else '128x128')"/>
                                </div>
                            </td>
                            <td><t t-esc="partner.name" /></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><t t-esc="partner.street2" /></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><t t-esc="partner.zip"/> <t t-esc="partner.city"/></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><t t-esc="partner.country_id.name"/></td>
                        </tr>
                    </table>
                </div>
                <div class="table-responsive">
                    <table class="table table-condensed member-profile-table">
                        <tr>
                            <td>Phone:</td>
                            <td><t t-esc="partner.phone" /></td>
                        </tr>
                        <tr>
                            <td>Email:</td>
                            <td><t t-esc="partner.email" /></td>
                        </tr>
                        <tr>
                            <td>Website:</td>
                            <td><t t-esc="partner.website"/></td>
                        </tr>
                        <tr>
                            <td>Facebook:</td>
                            <td><t t-esc="partner.facebook"/></td>
                        </tr>
                        <tr>
                            <td>Twitter:</td>
                            <td><t t-esc="partner.twitter"/></td>
                        </tr>
                        <tr>
                            <td>Skype:</td>
                            <td><t t-esc="partner.skype"/></td>
                        </tr>
                        <tr>
                            <td>Claim:</td>
                            <td><t t-esc="partner.website_short_description"/></td>
                        </tr>
                        <tr>
                            <td>Industry:</td>
                            <td>
                                <t t-foreach="partner.category_id" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                            </td>
                        </tr>
                        <tr>
                            <td>Expertise:</td>
                            <td>
                                <t t-foreach="partner.expertise_ids" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                            </td>
                        </tr>
                    </table>
                </div>
            </t>
            <div class="text-center">
              <a class="btn btn-primary" t-attf-href="/my/account" title="Edit profile">
                  Edit profile
              </a>
            </div>
        </div>
    </template>

      <!-- Add header in my account -->
    <template id="fluxdock_my_account_header" name="Fluxdock my account header" inherit_id="website_portal.account">
        <xpath expr="//div[contains(@id,'wrap')]" position="before">
            <section class="content members-list opt_dark_bg">
              <div class="container content-wrap">
                <div class="content-icon">
                  <img src="/website_portal_profile/static/src/img/member-white.png"></img>
                </div>
                <h2>My Account</h2>
              </div>
            </section>
        </xpath>
    </template>

    <!-- Add classes -->
      <!-- Replace website_portal.account in order to set multiple classes-->
    <template id="account_classes" name="Account" inherit_id="website_portal.account">-->
      <xpath expr="//div[contains(@class, 'o_my_documents')]" position="attributes">
        <attribute name="class">col-md-6 col-md-offset-3 o_my_documents</attribute>
      </xpath>
      <xpath expr="//div[contains(@class, 'o_my_sidebar')]" position="attributes">
        <attribute name="class">hide col-md-3 col-md-offset-1 o_my_sidebar</attribute>
      </xpath>
    </template>


    <template id="fluxdock_membership" name="Fluxdock membership" inherit_id="website_membership.index">
      <xpath expr="//div[@id='wrap']" position="replace">
        <div id="wrap">
          <div class="oe_structure">
            <section class="content members-list opt_dark_bg">
              <div class="container content-wrap">
                <div class="content-icon">
                    <img src="/website_portal_profile/static/src/img/members-white.png"></img>
                </div>
                <h2>Members</h2>
                <p>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                <form action="" method="get" class="search-panel members-search-panel">
                    <div class="filter-row row-1">
                        <input type="text" name="search" class="search-query form-control" placeholder="Search" t-att-value="post.get('search', '')" />
                        <button type="submit" class="btn btn-default btn-primary mb32 ">Search</button>
                    </div>
                </form>
                <div class="row hide">
                  <div class="col-md-12">
                    <h1 class="hide text-center">Our Members Directory</h1>
                    <h3 class="hide text-muted text-center">Find a business partner</h3>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="container row-centered">
            <div class="row">
              <div class="hide col-md-3 mb32" id="left_column">
                <ul class="nav nav-pills nav-stacked mt16">
                  <li class="nav-header">
                    <h3>Associations</h3>
                  </li>
                  <li t-att-class="'' if membership_id else 'active'">
                    <a href="/members">All</a>
                  </li>
                  <t t-foreach="memberships_data" t-as="membership_data">
                    <li t-att-class="membership_id and membership_data['id'] == membership_id and 'active' or ''">
                      <a t-attf-href="/members/association/#{ membership_data['id'] }#{current_country and '/country/%s' % slug(current_country) or ''}#{ search }">
                        <t t-esc="membership_data['name']" />
                      </a>
                    </li>
                  </t>
                </ul>
              </div>
              <div class="col-md-12" id="ref_content">
                <div class='navbar hide'>
                  <t t-call="website.pager">
                    <t t-set="classname">pull-left</t>
                  </t>
                  <form action="" method="get" class="search-query search-panel members-search-panel">
                    <div class="filter-row row-1">
                        <t t-call="website.website_search_box">
                            <t t-set="search" t-value="post.get('search', '')" />
                        </t>
                    </div>
                  </form>
                </div>
                <div class="content members-list container content-wrap" style="width: 646px;">
                  <t t-if="not memberships_partner_ids">
                    <p>No result found.</p>
                  </t>
                  <t t-foreach="memberships_data" t-as="membership_data">
                    <t t-if="memberships_partner_ids.get(membership_data['id'])">
                      <h3 class="hide text-center">
                        <span t-esc="membership_data['name']" />
                      </h3>
                      <t t-foreach="memberships_partner_ids[membership_data['id']]" t-as="partner_id">
                        <t t-set="partner" t-value="partners[partner_id]" />
                        <div class="media member-list-item">
                            <a class="pull-left member-logo"
                                t-attf-href="/members/#{slug(partner)}"
                                t-field="partner.image"
                                t-field-options='{"widget": "image", "class": "media-object", "max_width": 128}'>
                            </a>
                          <div class="media-body member-details" style="min-height: 64px;">
                            <a class="media-heading member-title" t-attf-href="/members/#{slug(partner)}" style="font-weight: bold;">
                              <span t-field="partner.display_name" />
                            </a>
                            <!-- <div t&#45;field="partner.website_short_description"/> -->
                            <div class="member-description">
                              <span t-field="partner.website_short_description" />
                              <a class="read-more" t-attf-href="/members/#{slug(partner)}">Read More
                              <i class="fa fa-long-arrow-right"></i></a>
                            </div>
                            <div class="member-tags">
                              <label for="category">Industry:</label>
                              <div class="tag-value" id="category">
                                <t t-foreach="partner.category_id" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                              </div>
                            </div>
                            <div class="member-tags">
                              <label for="expertise">Expertise:</label>
                              <div class="tag-value" id="expertise">
                                <t t-foreach="partner.expertise_ids" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                              </div>
                            </div>
                          </div>
                        </div>
                      </t>
                    </t>
                  </t>
                </div>
              </div>
            </div>
          </div>
          <div class="oe_structure" />
        </div>
        <div class="text-center mb32">
          <t t-call="website.pager"/>
        </div>
      </xpath>
    </template>

    <template id="fluxdock_partner_detail" name="Fluxdock partner details" inherit_id="website_partner.partner_detail">
      <xpath expr="//h1[@id='partner_name']" position="replace">
        <h1 class="hide col-md-12 text-center" id="partner_name" t-field="partner.display_name" />
      </xpath>
      <xpath expr="//h1[@id='partner_name']" position="after">
        <section class="top-spacer opt_dark_grid_bg"></section>
      </xpath>
      <xpath expr="//div[@class='col-md-4']" position="replace">
        <!-- Original -->
        <!-- <div class="col&#45;md&#45;4"> -->
        <!--    <div t&#45;field="partner.image" t&#45;field&#45;options='{"widget": "image", "class": "center&#45;block mb16"}'/> -->
        <!--    <address class="well"> -->
        <!--    <div t&#45;field="partner.self" t&#45;field&#45;options='{ -->
        <!--            "widget": "contact", -->
        <!--            "fields": ["address", "website", "phone", "fax", "email"] -->
        <!--    }'/> -->
        <!--    </address> -->
        <!--    <t t&#45;raw="left_column or ''"/> -->
        <!-- </div> -->
        <section class="content member-detail-view">
          <div class="content-wrap">
            <!--  Rich snippet -->
            <div class="member-logo" t-field="partner.image" t-field-options='{"widget": "image", "class": ""}' />
            <address class="hide well">
              <div t-field="partner.self" t-field-options='{ "widget": "contact", "fields": ["address", "website", "phone", "fax", "email"] }' />
            </address>
            <div class="member-details">
              <h2 class="member-title" id="partner_name" t-field="partner.display_name" />
              <t t-if="partner">
                <div class="member-description" t-field="partner.website_short_description" />
                <div class="member-tags">
                  <label for="category">Industry:</label>
                  <div class="tag-value" id="category">
                    <t t-foreach="partner.category_id" t-as="one_tag">
                      <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                    </t>
                  </div>
                </div>
                <div class="member-tags">
                  <label for="expertise">Expertise:</label>
                  <div class="tag-value" id="expertise">
                    <t t-foreach="partner.expertise_ids" t-as="one_tag">
                      <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                    </t>
                  </div>
                </div>
              </t>
            </div>
          </div>
        </section>
        <section class="content member-address opt_dark_bg">
          <t t-if="partner">
            <div class="content-wrap">
              <h2>Contact</h2>
              <div class="member-fields">
              <t t-esc="partner.street" />
              <br />
              <t t-esc="partner.country_id.name" />-
              <t t-esc="partner.zip" />
              <t t-esc="partner.city" />
              <br />
              <t t-if="partner.phone">t
              <t t-esc="partner.phone" />
              <br /></t>
              <t t-if="partner.fax">f
              <t t-esc="partner.fax" />
              <br /></t>
              <t t-if="partner.email">
                <a t-attf-href="mailto:{{ partner.email }}"><t t-esc="partner.email"/></a>
                <br />
              </t>
              <t t-if="partner.website">
                <a t-att-href="partner.website"><t t-esc="partner.website"/></a>
              </t>
              </div>
              <div class="member-social-media">
                <a target="_blank" t-att-href="partner.facebook" t-if="partner.facebook" class="social-media facebook">
                  <i class="fa fa-facebook" aria-hidden="true"/>
                </a>
                <a target="_blank" t-att-href="partner.twitter" t-if="partner.twitter" class="social-media twitter">
                  <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
                <a target="_blank" t-att-href="partner.skype" t-if="partner.skype" class="social-media skype">
                  <i class="fa fa-skype" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </t>
        </section>
      </xpath>
      <xpath expr="//div[@class='col-md-8 mt32']" position="replace">
        <div class="col-md-8 mt32 hide">
          <t t-if="partner">
            <div t-field="partner.website_description" />
            <t groups="base.group_website_publisher">
              <h2 class="css_non_editable_mode_hidden">Short Description for List View</h2>
              <div class="css_non_editable_mode_hidden" t-field="partner.website_short_description" />
            </t>
          </t>
          <t t-raw="right_column or ''" />
        </div>
      </xpath>
    </template>

    <record id="view_fluxdock_member_fields_form" model="ir.ui.view">
      <field name="name">res.partner.fluxdock.member.fields</field>
      <field name="model">res.partner</field>
      <field name="priority">2</field>
      <field name="inherit_id" ref="base.view_partner_form" />
      <field name="arch" type="xml">
        <field name="email" position="after">
          <field name="skype" />
          <field name="facebook" />
          <field name="twitter" />
        </field>
        <field name="website" position="after">
          <field name="website_short_description" string="Claim" />
        </field>
      </field>
    </record>

</odoo>
