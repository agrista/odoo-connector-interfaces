<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <template id="fluxdock_membership" name="Fluxdock membership" inherit_id="website_membership.index">
      <xpath expr="//div[@id='wrap']" position="replace">
        <div id="wrap">
          <div class="oe_structure">
            <section class="content members-list opt_dark_bg">
              <div class="container">
                <div class="row">
                  <div class="col-md-12">
                    <h1 class="hide text-center">Our Members Directory</h1>
                    <h3 class="hide text-muted text-center">Find a business partner</h3>
                    <h2>Members</h2>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="container">
            <div class="row">
              <div class="hide col-md-3 mb32" id="left_column">
                <ul class="nav nav-pills nav-stacked mt16">
                  <li class="nav-header">
                    <h3>Associations</h3>
                  </li>
                  <li t-att-class="'' if membership_id else 'active'">
                    <a href="/members">All</a>
                  </li>
                  <t t-foreach="memberships_data" t-as="membership_data">
                    <li t-att-class="membership_id and membership_data['id'] == membership_id and 'active' or ''">
                      <a t-attf-href="/members/association/#{ membership_data['id'] }#{current_country and '/country/%s' % slug(current_country) or ''}#{ search }">
                        <t t-esc="membership_data['name']" />
                      </a>
                    </li>
                  </t>
                </ul>
              </div>
              <div class="col-md-8" id="ref_content">
                <div class='navbar'>
                  <t t-call="website.pager">
                    <t t-set="classname">pull-left</t>
                  </t>
                  <form action="" method="get" class="search-query">
                    <t t-call="website.website_search_box">
                      <t t-set="search" t-value="post.get('search', '')" />
                    </t>
                  </form>
                </div>
                <div>
                  <t t-if="not memberships_partner_ids">
                    <p>No result found.</p>
                  </t>
                  <t t-foreach="memberships_data" t-as="membership_data">
                    <t t-if="memberships_partner_ids.get(membership_data['id'])">
                      <h3 class="hide text-center">
                        <span t-esc="membership_data['name']" />
                      </h3>
                      <t t-foreach="memberships_partner_ids[membership_data['id']]" t-as="partner_id">
                        <t t-set="partner" t-value="partners[partner_id]" />
                        <div class="media">
                          <a class="pull-left" t-attf-href="/members/#{slug(partner)}" t-field="partner.image_small" t-field-options='{"widget": "image", "class": "media-object"}'></a>
                          <div class="media-body" style="min-height: 64px;">
                            <a class="media-heading" t-attf-href="/members/#{slug(partner)}">
                              <span t-field="partner.display_name" />
                            </a>
                            <!-- <div t&#45;field="partner.website_short_description"/> -->
                            <div class="member-description">
                              <span t-field="partner.website_short_description" />
                              <a class="read-more" t-attf-href="/members/#{slug(partner)}">Read More
                              <i class="fa fa-long-arrow-right"></i></a>
                            </div>
                            <div class="member-tags">
                              <label for="category">Industry:</label>
                              <div class="tag-value" id="category">
                                <t t-foreach="partner.category_id" t-as="one_tag">
                                  <t t-esc="one_tag.name" />
                                </t>
                              </div>
                            </div>
                            <div class="member-tags">
                              <label for="expertise">Expertise:</label>
                              <div class="tag-value" id="expertise">
                                <t t-foreach="partner.expertise_ids" t-as="one_tag">
                                  <t t-esc="one_tag.name" />
                                </t>
                              </div>
                            </div>
                          </div>
                        </div>
                      </t>
                    </t>
                  </t>
                </div>
              </div>
            </div>
          </div>
          <div class="oe_structure" />
        </div>
      </xpath>
    </template>

    <template id="fluxdock_partner_detail" name="Fluxdock partner details" inherit_id="website_partner.partner_detail">
      <xpath expr="//h1[@id='partner_name']" position="replace">
        <h1 class="hide col-md-12 text-center" id="partner_name" t-field="partner.display_name" />
      </xpath>
      <xpath expr="//h1[@id='partner_name']" position="after">
        <section class="top-spacer opt_dark_grid_bg"></section>
      </xpath>
      <xpath expr="//div[@class='col-md-4']" position="replace">
        <!-- Original -->
        <!-- <div class="col&#45;md&#45;4"> -->
        <!--    <div t&#45;field="partner.image" t&#45;field&#45;options='{"widget": "image", "class": "center&#45;block mb16"}'/> -->
        <!--    <address class="well"> -->
        <!--    <div t&#45;field="partner.self" t&#45;field&#45;options='{ -->
        <!--            "widget": "contact", -->
        <!--            "fields": ["address", "website", "phone", "fax", "email"] -->
        <!--    }'/> -->
        <!--    </address> -->
        <!--    <t t&#45;raw="left_column or ''"/> -->
        <!-- </div> -->
        <section class="content member-detail-view">
          <div class="content-wrap">
            <!--  Rich snippet -->
            <div class="member-logo" t-field="partner.image" t-field-options='{"widget": "image", "class": ""}' />
            <address class="hide well">
              <div t-field="partner.self" t-field-options='{ "widget": "contact", "fields": ["address", "website", "phone", "fax", "email"] }' />
            </address>
            <div class="member-details">
              <h2 class="member-title" id="partner_name" t-field="partner.display_name" />
              <t t-if="partner">
                <div class="member-description" t-field="partner.website_short_description" />
                <div class="member-tags">
                  <label for="category">Industry:</label>
                  <div class="tag-value" id="category">
                    <t t-foreach="partner.category_id" t-as="one_tag">
                      <t t-esc="one_tag.name" />
                    </t>
                  </div>
                </div>
                <div class="member-tags">
                  <label for="expertise">Expertise:</label>
                  <div class="tag-value" id="expertise">
                    <t t-foreach="partner.expertise_ids" t-as="one_tag">
                      <t t-esc="one_tag.name" />
                    </t>
                  </div>
                </div>
              </t>
            </div>
          </div>
        </section>
        <section class="content member-address opt_dark_bg">
          <t t-if="partner">
            <div class="content-wrap">
              <h2>Contact</h2>
              <div class="member-fields">
              <t t-esc="partner.street" />
              <br />
              <t t-esc="partner.country_id.name" />- 
              <t t-esc="partner.zip" />
              <t t-esc="partner.city" />
              <br />
              <t t-if="partner.phone">t 
              <t t-esc="partner.phone" />
              <br /></t>
              <t t-if="partner.fax">f 
              <t t-esc="partner.fax" />
              <br /></t>
              <t t-if="partner.email">
                <t t-esc="partner.email" />
                <br />
              </t>
              <t t-if="partner.email">
                <!-- Wie geht das?
                                                                <a t-attf-href="partner.website">
                                                                -->
                <t t-esc="partner.website" />
                <!-- Wie geht das?
                                                                </a>
                                                                -->
              </t></div>
              <div class="member-social-media">
                <!-- TODO Hier url's ersetzen mit werten vom member -->
                <a target="_blank" t-attf-href="partner.facebook" class="social-media facebook">
                  <i class="fa fa-facebook" aria-hidden="true"></i>
                  <!-- <t t&#45;esc="partner.facebook" /> -->
                </a>
                <a target="_blank" href="partner.twitter" class="social-media twitter">
                  <i class="fa fa-twitter" aria-hidden="true"></i>
                  <!-- <t t&#45;esc="partner.twitter" /> -->
                </a>
                <a target="_blank" href="partner.skype" class="social-media skype">
                  <i class="fa fa-skype" aria-hidden="true"></i>
                  <!-- <t t&#45;esc="partner.skype" /> -->
                </a>
              </div>
            </div>
          </t>
        </section>
      </xpath>
      <xpath expr="//div[@class='col-md-8 mt32']" position="replace">
        <div class="col-md-8 mt32 hide">
          <t t-if="partner">
            <div t-field="partner.website_description" />
            <t groups="base.group_website_publisher">
              <h2 class="css_non_editable_mode_hidden">Short Description for List View</h2>
              <div class="css_non_editable_mode_hidden" t-field="partner.website_short_description" />
            </t>
          </t>
          <t t-raw="right_column or ''" />
        </div>
      </xpath>
    </template>

    <record id="view_fluxdock_member_fields_form" model="ir.ui.view">
      <field name="name">res.partner.fluxdock.member.fields</field>
      <field name="model">res.partner</field>
      <field name="priority">2</field>
      <field name="inherit_id" ref="base.view_partner_form" />
      <field name="arch" type="xml">
        <field name="email" position="after">
          <field name="skype" />
          <field name="facebook" />
          <field name="twitter" />
        </field>
        <field name="website" position="after">
          <field name="website_short_description" string="Claim" />
        </field>
      </field>
    </record>

  </data>
</odoo>
