<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- load member profile table -->
    <template id="account" name="Account" inherit_id="website_portal.account">
        <xpath expr="//div[contains(@class,'o_my_documents')]" position="inside">
            <t t-call="specific_membership.partner_table" />
        </xpath>
    </template>

    <!-- Partner profile table -->
    <template id="specific_membership.partner_table" name="Partner table">
        <!-- Temporary hiding / change. Waiting for final design -->
        <!--<div id="partner_table" class="col-md-12">-->
        <div id="partner_table" class="container content-wrap" style="width: 646px;">
            <h3 class="page-header">Member profile</h3>
            <t t-if="partner">
                <!-- Temporary hiding / change. Waiting for final design -->
                <!--<div class="table-responsive center-block">-->
                <div class="container content-wrap" style="width: 646px;">
                    <table class="table table-condensed member-profile-table no-border">
                        <tr>
                            <td>
                                <div class="media">
                                    <img itemtype="image" class="img img-responsive" t-att-src="website.image_url(partner, 'image', None if product_image_big else '128x128')"/>
                                </div>
                            </td>
                            <td>
                              <b><t t-esc="partner.name" /></b><br/>
                              <b><t t-esc="partner.street2" /></b><br/>
                              <b><t t-esc="partner.zip"/> <t t-esc="partner.city"/></b><br/>
                              <b><t t-esc="partner.country_id.name"/></b>
                            </td>
                        </tr>
                        <tr>
                            <td>Phone:</td>
                            <td><t t-esc="partner.phone" /></td>
                        </tr>
                        <tr>
                            <td>Email:</td>
                            <td><t t-esc="partner.email" /></td>
                        </tr>
                        <tr>
                            <td>Website:</td>
                            <td><t t-esc="partner.website"/></td>
                        </tr>
                        <tr>
                            <td>Facebook:</td>
                            <td><t t-esc="partner.facebook"/></td>
                        </tr>
                        <tr>
                            <td>Twitter:</td>
                            <td><t t-esc="partner.twitter"/></td>
                        </tr>
                        <tr>
                            <td>Skype:</td>
                            <td><t t-esc="partner.skype"/></td>
                        </tr>
                        <tr>
                            <td>Claim:</td>
                            <td><t t-esc="partner.website_short_description"/></td>
                        </tr>
                        <tr>
                            <td>Industry:</td>
                            <td>
                                <t t-foreach="partner.category_id" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                            </td>
                        </tr>
                        <tr>
                            <td>Expertise:</td>
                            <td>
                                <t t-foreach="partner.expertise_ids" t-as="one_tag">
                                  <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                                </t>
                            </td>
                        </tr>
                    </table>
                </div>
            </t>
            <div class="text-center">
              <a class="btn btn-primary" t-attf-href="/my/account" title="Edit profile">
                  Edit profile
              </a>
            </div>
        </div>
    </template>

      <!-- Add header in my account -->
    <template id="fluxdock_my_account_header" name="Fluxdock my account header" inherit_id="website_portal.account">
        <xpath expr="//div[contains(@id,'wrap')]" position="before">
            <section class="content members-list opt_dark_bg">
              <div class="container content-wrap">
                <div class="content-icon">
                  <img src="/specific_membership/static/src/img/member-white.png"></img>
                </div>
                <h2>My Account</h2>
              </div>
            </section>
            <t t-call="specific_membership.profile_progress_bar" />
        </xpath>
    </template>

    <!-- Add classes -->
    <!-- Replace website_portal.account in order to set multiple classes-->
    <template id="account_classes" name="Account" inherit_id="website_portal.account">
      <xpath expr="//div[contains(@class, 'o_my_documents')]" position="attributes">
        <attribute name="class">col-md-4 col-md-offset-4 o_my_documents</attribute>
      </xpath>
      <xpath expr="//div[contains(@class, 'o_my_sidebar')]" position="attributes">
        <attribute name="class">hide col-md-3 col-md-offset-1 o_my_sidebar</attribute>
      </xpath>
    </template>


    <template id="fluxdock_membership" name="Fluxdock membership" inherit_id="website_membership.index">
      <xpath expr="//div[@id='wrap']" position="replace">
        <div id="wrap">
          <div class="oe_structure">
            <!--  make membership module inheritance happy also in demo mode! -->
            <div id="left_column" style="display:none!important">
				<ul class="nav nav-pills nav-stacked mt16"><li></li></ul>
            </div>

            <section class="content members-list opt_dark_bg">
              <div class="container content-wrap">
                <div class="content-icon">
                    <img src="/specific_membership/static/src/img/members-white.png"></img>
                </div>
                <h2>Members</h2>
                <p align="left">Fluxdock is based on its members. They form all together the interdisciplinary and collaborative network that enables the members mutually to innovation. See here are all members of Fluxdock, their industries and special expertises.</p>
                <form action="/members" method="get" class="search-panel members-search-panel">
                    <div class="filter-row row-1">
                        <input type="text" name="search" class="search-query form-control" placeholder="Search" t-att-value="post.get('search', '')" />
                        <button type="submit" class="btn btn-default btn-primary ">Search</button>
                    </div>
                    <div class="filter-row row-2">
                      <div class="oe_search">
                        <input name="search_industries"
                              class="search-query form-control oe_search_box js_select2_categories"
                              placeholder="Industries"
                              t-attf-data-init-value="#{industries}" value="Industry"/>
                        <input name="search_expertises"
                              class="search-query form-control oe_search_box js_select2_expertises"
                              placeholder="Expertises"
                              t-attf-data-init-value="#{expertises}" value="Expertise"/>
                        <div class="styled-select">
                          <select name="search_country" class="form-control">
                            <option value="">All countries</option>
                            <t t-foreach="countries or []" t-as="country">
                              <option t-att-value="country['country_id'][0]"
                                t-att-selected="country['country_id'][0] == selected_country_id">
                                <t t-esc="country['country_id'][1]" />
                              </option>
                            </t>
                          </select>
                        </div>
                      </div>
                    </div>
                </form>
                <div class="row hide">
                  <div class="col-md-12">
                    <h1 class="hide text-center">Our Members Directory</h1>
                    <h3 class="hide text-muted text-center">Find a business partner</h3>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="container row-centered">
            <div class="row">
              <div class="col-md-12" id="ref_content">
                <div class='navbar hide'>
                  <t t-call="website.pager">
                    <t t-set="classname">pull-left</t>
                  </t>
                  <form action="" method="get" class="search-query search-panel members-search-panel">
                    <div class="filter-row row-1">
                        <t t-call="website.website_search_box">
                            <t t-set="search" t-value="post.get('search', '')" />
                        </t>
                    </div>
                  </form>
                </div>
                <div class="content members-list container content-wrap" style="width: 646px;">
                  <t t-if="not memberships_partners">
                    <p>No result found.</p>
                  </t>
                  <t t-foreach="memberships_partners" t-as="partner">
                    <div class="media member-list-item" style="width: 646px;">
                        <t t-set="detail_href" t-value="'/members/' + slug(partner)" />
                        <a class="pull-left member-logo"
                            t-att-href="detail_href"
                            t-field="partner.image"
                            t-field-options='{"widget": "image", "class": "media-object", "max_width": 128}'>
                        </a>
                      <div class="media-body member-details" style="min-height: 64px;">
                        <a class="media-heading member-title"
                           t-att-href="detail_href"
                           style="font-weight: bold;">
                          <span t-field="partner.display_name" />
                        </a>
                        <div class="member-description">
                          <span t-esc="website.truncate_text(partner.website_short_description, length=200)" />
                          <a class="read-more"
                             t-att-href="detail_href">Read More
                              <i class="fa fa-long-arrow-right"></i>
                          </a>
                        </div>
                        <div class="member-tags">
                          <label for="category">Industry:</label>
                          <div class="tag-value" id="category">
                            <t t-foreach="partner.category_id" t-as="one_tag">
                              <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                            </t>
                          </div>
                        </div>
                        <div class="member-tags">
                          <label for="expertise">Expertise:</label>
                          <div class="tag-value" id="expertise">
                            <t t-foreach="partner.expertise_ids" t-as="one_tag">
                              <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                            </t>
                          </div>
                        </div>
                      </div>
                    </div>
                  </t>
                </div>
              </div>
            </div>
          </div>
          <div class="oe_structure" />
        </div>
        <div class="text-center mb32">
          <t t-call="website.pager"/>
        </div>
        <t t-call="specific_membership.not_associated_modal" />
      </xpath>
    </template>

    <template id="fluxdock_partner_detail" name="Fluxdock partner details" inherit_id="website_partner.partner_detail">
      <xpath expr="//h1[@id='partner_name']" position="replace">
        <h1 class="hide col-md-12 text-center" id="partner_name" t-field="partner.display_name" />
      </xpath>
      <xpath expr="//h1[@id='partner_name']" position="after">
        <section class="top-spacer opt_dark_grid_bg"></section>
      </xpath>
      <xpath expr="//div[@class='col-md-4']" position="replace">
        <section class="content member-detail-view">
          <div class="content-wrap">
            <!--  Rich snippet -->
            <t t-if="partner.image">
                <div class="member-logo" t-field="partner.image" t-field-options='{"widget": "image", "class": ""}' />
            </t>
            <address class="hide well">
              <div t-field="partner.self" t-field-options='{ "widget": "contact", "fields": ["address", "website", "phone", "fax", "email"] }' />
            </address>
            <div class="member-details">
              <h2 class="member-title" id="partner_name" t-field="partner.display_name" />
              <t t-if="partner">
                <div class="member-description" t-field="partner.website_short_description" />
                <div class="member-tags">
                  <label for="category">Industry:</label>
                  <div class="tag-value" id="category">
                    <t t-foreach="partner.category_id" t-as="one_tag">
                      <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                    </t>
                  </div>
                </div>
                <div class="member-tags">
                  <label for="expertise">Expertise:</label>
                  <div class="tag-value" id="expertise">
                    <t t-foreach="partner.expertise_ids" t-as="one_tag">
                      <t t-esc="one_tag.name + ('' if one_tag_last else ', ')" />
                    </t>
                  </div>
                </div>
              </t>
            </div>
          </div>
        </section>
        <section class="content member-address opt_dark_bg">
          <t t-if="partner">
            <div class="content-wrap">
              <h2>Contact</h2>
              <div class="member-fields">
              <t t-esc="partner.street" />
              <br />
              <t t-esc="partner.country_id.name" />-
              <t t-esc="partner.zip" />
              <t t-esc="partner.city" />
              <br />
              <t t-if="partner.phone">t
              <t t-esc="partner.phone" />
              <br /></t>
              <t t-if="partner.fax">f
              <t t-esc="partner.fax" />
              <br /></t>
              <t t-if="partner.email">
                <a t-attf-href="mailto:{{ partner.email }}"><t t-esc="partner.email"/></a>
                <br />
              </t>
              <t t-if="partner.website">
                <a t-att-href="partner.website"><t t-esc="partner.website"/></a>
              </t>
              </div>
              <div class="member-social-media">
                <a target="_blank" t-att-href="partner.facebook" t-if="partner.facebook" class="social-media facebook">
                  <i class="fa fa-facebook" aria-hidden="true"/>
                </a>
                <a target="_blank" t-att-href="partner.twitter" t-if="partner.twitter" class="social-media twitter">
                  <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
                <a target="_blank" t-att-href="partner.skype" t-if="partner.skype" class="social-media skype">
                  <i class="fa fa-skype" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </t>
        </section>
      </xpath>
      <xpath expr="//div[@class='col-md-8 mt32']" position="replace">
        <div class="col-md-8 mt32 hide">
          <t t-if="partner">
            <div t-field="partner.website_description" />
            <t groups="base.group_website_publisher">
              <h2 class="css_non_editable_mode_hidden">Short Description for List View</h2>
              <div class="css_non_editable_mode_hidden" t-field="partner.website_short_description" />
            </t>
          </t>
          <t t-raw="right_column or ''" />
        </div>
      </xpath>
    </template>

</odoo>
