<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- TODO: unify this template too, since we need it for all the listings (proposals, reference, market, etc)
    Unfortunately we cannot pass translateable strings for label as variables... AFAIK -->
    <template id="member_item_tags" name="Fluxdock member tags template">
        <div class="item-tags">
            <strong>Industry:</strong>
            <span class="tag-value">
                <t t-foreach="item.category_id" t-as="one_tag">
                    <t t-esc="one_tag.name + ('' if one_tag_last else ', ')"/>
                </t>
            </span>
        </div>
        <div class="item-tags">
            <strong>Expertise:</strong>
            <span class="tag-value">
                <t t-foreach="item.expertise_ids" t-as="one_tag">
                    <t t-esc="one_tag.name + ('' if one_tag_last else ', ')"/>
                </t>
            </span>
        </div>
    </template>


    <template id="fluxdock_membership" name="Fluxdock membership" inherit_id="website_membership.index">
      <xpath expr="//div[@id='wrap']" position="replace">
        <div id="wrap" class="members-listing">
          <div class="oe_structure">
            <!--  make membership module inheritance happy also in demo mode! -->
            <div id="left_column" style="display:none!important">
				<ul class="nav nav-pills nav-stacked mt16"><li></li></ul>
            </div>

            <section class="content opt_dark_bg">
              <div class="content-wrap">
                <div class="content-icon">
                    <img src="/specific_membership/static/src/img/members-white.png"></img>
                </div>
                <h2>Members</h2>
                <p align="left">Fluxdock is based on its members. They form all together the interdisciplinary and collaborative network that enables the members mutually to innovation. See here are all members of Fluxdock, their industries and special expertises.</p>
                <form action="/members" method="get" class="search-panel members-search-panel">
                    <div class="row filter-row row-1">
                        <div class="col-md-12">
                            <input type="text" name="search" class="search-query form-control" placeholder="Search" t-att-value="post.get('search', '')" />
                            <button type="submit" class="btn btn-default btn-primary ">Search</button>
                        </div>
                    </div>
                    <div class="row filter-row row-2">
                        <div class="col-md-4">
                            <input type="text" id="search_industries" name="search_industries"
                                   t-attf-class="search-query form-control js_select2_m2m_widget search_industries"
                                   t-att-data-init-value="industries" value="Industries"
                                   t-attf-data-model="res.partner.category"
                                   data-display_name="name" data-fields='["name"]' data-domain='[]'
                                   />
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="search_expertises" name="search_expertises"
                                   t-attf-class="search-query form-control js_select2_m2m_widget search_expertises"
                                   t-att-data-init-value="expertises" value="Expertise"
                                   t-attf-data-model="partner.project.expertise"
                                   data-display_name="name" data-fields='["name"]' data-domain='[]'
                                  />
                        </div>
                        <div class="col-md-4">
                            <div class="styled-select">
                              <select name="search_country" class="form-control">
                                <option value="">All countries</option>
                                <t t-foreach="countries or []" t-as="country">
                                    <t t-if="country['country_id']">
                                      <option t-att-value="country['country_id'][0]"
                                        t-att-selected="country['country_id'][0] == selected_country_id">
                                        <t t-esc="country['country_id'][1]" />
                                      </option>
                                    </t>
                                </t>
                              </select>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="row hide">
                  <div class="col-md-12">
                    <h1 class="hide text-center">Our Members Directory</h1>
                    <h3 class="hide text-muted text-center">Find a business partner</h3>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="container">
            <div class="center-block main-content-wrapper" id="ref_content">
                <t t-call="theme_fluxdocs.listing">
                    <t t-set="detail_url" t-value="'/members/{}'" />
                    <t t-set="show_preview" t-value="1" />
                    <t t-set="listing_items" t-value="memberships_partners" />
                    <t t-set="item_tags_template" t-value="'specific_membership.member_item_tags'" />
                </t>
            </div>
          </div>
          <div class="oe_structure" />
        </div>
        <div class="text-center mb32">
          <t t-call="website.pager"/>
        </div>
      </xpath>
    </template>

</odoo>
