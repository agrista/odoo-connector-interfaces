<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="partner" inherit_id="website_membership.partner">
        <xpath expr="//div[@id='wrap']" position="attributes">
            <attribute name="class" add="opt_dark_grid_bg member-detail" separator=" " />
        </xpath>
        <xpath expr="//div[contains(@class,'container')]"  position="attributes">
            <attribute name="class">container-fluid</attribute>
        </xpath>
    </template>

    <template id="fluxdock_partner_detail" name="Fluxdock partner details" inherit_id="website_partner.partner_detail">
      <xpath expr="//h1[@id='partner_name']" position="replace">
        <h1 class="hide col-md-12 text-center" id="partner_name" t-field="partner.display_name" />
      </xpath>
      <xpath expr="//h1[@id='partner_name']" position="after">
        <section class="top-spacer-small opt_dark_grid_bg"></section>
      </xpath>
      <xpath expr="//div[@class='col-md-4']" position="replace">

        <t t-if="partner_user">
            <t t-set="carousel_items" t-value="[x for x in partner_user.references_ids if x.image]" />
            <t t-if="carousel_items">
                <div class="container-xxlg">
                    <div class="references-slider">
                        <t t-call="theme_fluxdocs.carousel">
                            <t t-set="carousel_data" t-value='"""{"auto":true, "mode": "fade"}"""' />
                        </t>
                    </div>
                </div>
            </t>
        </t>
        <section class="content member-detail-view white_bg">
          <div class="content-wrap">
            <div class="row">
                <div class="col-md-3">
                    <t t-if="partner.image">
                        <div t-field="partner.image" t-field-options='{"widget": "image", "class": "center-block"}' />
                    </t>
                </div>
                <div class="col-md-9">
                    <div class="item-details">
                      <h2 class="item-title member-title" id="partner_name" t-field="partner.display_name" />
                      <t t-if="partner">
                        <div class="item-description" t-field="partner.website_short_description" />
                        <t t-call="specific_membership.member_item_tags">
                            <t t-set="item" t-value="partner" />
                        </t>
                      </t>
                    </div>
                </div>
            </div>
          </div>
          <address class="hide well">
            <div t-field="partner.self" t-field-options='{ "widget": "contact", "fields": ["address", "website", "phone", "fax", "email"] }' />
          </address>
        </section>
        <section class="content member-address opt_dark_bg">
          <t t-if="partner">
            <div class="content-wrap">
              <h2>Contact</h2>
              <div class="member-fields">
              <t t-esc="partner.street" />
              <br />
              <t t-esc="partner.country_id.name" />-
              <t t-esc="partner.zip" />
              <t t-esc="partner.city" />
              <br />
              <t t-if="partner.phone">t
              <t t-esc="partner.phone" />
              <br /></t>
              <t t-if="partner.fax">f
              <t t-esc="partner.fax" />
              <br /></t>
              <t t-if="partner.email">
                <a t-attf-href="mailto:{{ partner.email }}"><t t-esc="partner.email"/></a>
                <br />
              </t>
              <t t-if="partner.website">
                <a t-att-href="partner.website"><t t-esc="partner.website"/></a>
              </t>
              </div>
              <div class="member-social-media">
                <a target="_blank" t-att-href="partner.facebook" t-if="partner.facebook" class="social-media facebook">
                  <i class="fa fa-facebook" aria-hidden="true"/>
                </a>
                <a target="_blank" t-att-href="partner.twitter" t-if="partner.twitter" class="social-media twitter">
                  <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
                <a target="_blank" t-att-href="partner.skype" t-if="partner.skype" class="social-media skype">
                  <i class="fa fa-skype" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </t>
        </section>
        <t t-if="partner_user">
            <div class="project-references white_bg">
                <div class="container-xxlg">
                    <section class="content">
                      <div class="content-wrap">
                        <h2>Projects</h2>
                        <p class="text-left">Lorem ipsum dolor sit amet, vix ex quodsi blandit suscipit. His in decore omnium appareat, usu at quas albucius complectitur. Everti menandri suavitate duo in, per cu liber dicit. Posse delectus postulant ea vis. Agam legimus percipit eu vis. Summo labores offendit quo eu, quo quas posidonium at, ea incorrupte interpretaris sit.</p>
                      </div>
                    </section>
                    <t t-call="theme_fluxdocs.mosaic">
                        <t t-set="data_model" t-value="'project.reference'" />
                        <t t-set="data_limit" t-value="'4'" />
                        <t t-set="data_order" t-value="'create_date desc'" />
                        <!-- `partner_user` comes from our `partner_details` controller override -->
                        <t t-set="data_domain" t-value='"""[["create_uid","=",{}]]""".format(partner_user.id)' />
                    </t>
                    <section class="content">
                      <div class="content-wrap">
                        <a class="text-center" href="/references">More...</a>
                      </div>
                    </section>
                </div>
            </div>
        </t>
      </xpath>
      <xpath expr="//div[@class='col-md-8 mt32']" position="replace">
        <div class="col-md-8 mt32 hide">
          <t t-if="partner">
            <div t-field="partner.website_description" />
            <t groups="base.group_website_publisher">
              <h2 class="css_non_editable_mode_hidden">Short Description for List View</h2>
              <div class="css_non_editable_mode_hidden" t-field="partner.website_short_description" />
            </t>
          </t>
          <t t-raw="right_column or ''" />
        </div>
      </xpath>
    </template>

</odoo>
